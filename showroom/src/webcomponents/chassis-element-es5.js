"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ChassisElement=function(t){return function(e){function n(e){var i;_classCallCheck(this,n),(i=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this))).keySource="key"in KeyboardEvent.prototype?"key":"keyIdentifier"in KeyboardEvent.prototype?"keyIdentifier":"keyCode",i.attachShadow({mode:"open"});var t=document.createElement("div");t.insertAdjacentHTML("afterbegin",e);var r=t.querySelector("template");"content"in r?i.shadowRoot.appendChild(r.content.cloneNode(!0)):r.childNodes.forEach(function(e){i.shadowRoot.appendChild(e.cloneNode(!0))}),r=null,i.crypto=null;try{i.crypto=crypto}catch(e){i.crypto=msCrypto}return Object.defineProperties(_assertThisInitialized(_assertThisInitialized(i)),{PRIVATE:{value:{}},UTIL:{value:{}}}),Object.defineProperties(i.PRIVATE,{attributes:{value:[]},booleanAttributes:{value:[]},privateProperties:{value:[]},readOnlyProperties:{value:[]},listeners:{value:[]}}),Object.defineProperties(i.UTIL,{defineAttribute:{value:function(t,e){i.PRIVATE.attributes.push(t);var r=null;if("object"===_typeof(e)){var n=e;n.hasOwnProperty("set")&&(r=n.set),e=n.default||null}Object.defineProperty(i.PRIVATE,t,{set:function(e){return r&&r(e)}}),Object.defineProperty(_assertThisInitialized(_assertThisInitialized(i)),t,{get:function(){return i.hasAttribute(t)?i.getAttribute(t):e},set:function(e){return i.setAttribute(t,e)}})}},defineAttributes:{value:function(e){for(var t in e)i.UTIL.defineAttribute(t,e[t])}},defineBooleanAttribute:{value:function(t){i.PRIVATE.booleanAttributes.push(t),Object.defineProperty(_assertThisInitialized(_assertThisInitialized(i)),t,{get:function(){return this.UTIL.getBooleanAttributeValue(t)},set:function(e){this.UTIL.setBooleanAttributeValue(t,e)}})}},defineBooleanAttributes:{value:function(e){return e.forEach(function(e){return i.UTIL.defineBooleanAttribute(e)})}},definePrivateProperty:{value:function(e,t){i.PRIVATE.privateProperties.push(e),Object.defineProperty(i.PRIVATE,e,{writable:!0,value:t})}},definePrivateProperties:{value:function(e){for(var t in e)i.UTIL.definePrivateProperty(t,e[t])}},defineReadOnlyProperty:{value:function(t){return"string"==typeof t?(i.PRIVATE.readOnlyProperties.push(t),Object.defineProperty(_assertThisInitialized(_assertThisInitialized(i)),t,{set:function(e){this.throwError({type:"readonly",vars:{prop:t}})}})):"object"!==_typeof(t)?i.UTIL.throwError({type:"type",message:'Read-only property must be type "object" or "string"'}):t.hasOwnProperty("name")?(i.PRIVATE.readOnlyProperties.push(t.name),void Object.defineProperty(_assertThisInitialized(_assertThisInitialized(i)),t.name,{set:function(e){this.UTIL.throwError({type:"readonly",vars:{prop:t.name}})},get:t.hasOwnProperty("get")?t.get:function(){return this[t]}})):i.UTIL.throwError({type:"reference",message:'Read-only property definition object must must have a "name" property!'})}},defineReadOnlyProperties:{value:function(e){return e.forEach(function(e){return i.UTIL.defineReadOnlyProperty(e)})}},getBooleanAttributeValue:{value:function(e){return i.hasAttribute(e)&&"false"!==i.getAttribute(e)}},setBooleanAttributeValue:{value:function(e,t){"boolean"==typeof t&&(t=t.toString());if(!["true","false","",null].includes(t))return console.error("<".concat(i.localName,'> "').concat(e,'" attribute expected boolean but received "').concat(t,'"')),i.removeAttribute(e);switch(t){case"false":case null:return i.removeAttribute(e);case"true":case"":return i.setAttribute(e,"");default:return}}},createEvent:{value:function(e,t){return new CustomEvent(e,{detail:t})}},generateGuid:{value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^i.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});return e?"".concat(e,"_").concat(t):t}},throwError:{value:function(e){var t="<".concat(i.localName,"> "),r=e.type||"custom",n=new Error,o=(e||null).vars;throw"dependency"===r&&(t+="Missing dependency",o&&(o.hasOwnProperty("name")&&(t+=": ".concat(o.name)),o.hasOwnProperty("url")&&(t+=" ".concat(o.url)))),"readonly"===r&&(t+="Cannot set read-only property",o&&o.hasOwnProperty("prop")&&(t+=' "'.concat(o.prop,'"'))),"reference"===r&&(n=new ReferenceError),"type"===r&&(n=new TypeError),e.hasOwnProperty("message")&&(t+=" ".concat(e.message)),n.message=t.trim(),n}},childMonitor:{value:null},monitorChildren:{value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];i.childMonitor=new MutationObserver(e),i.childMonitor.observe(_assertThisInitialized(_assertThisInitialized(i)),{childList:!0,attributes:!1,characterData:!1,subtree:"boolean"==typeof t&&t})}},registerListener:{value:function(e,t,r){var n={id:"listener_".concat(i.UTIL.generateGuid()),apply:function(){e.addEventListener(t,r)},remove:function(){e.removeEventListener(t,r)}};i.PRIVATE.listeners.push(n),n.apply()}},registerListeners:{value:function(t,e){e.forEach(function(e){return i.UTIL.registerListener(t,e.evt,e.callback)})}}}),i.addEventListener("attribute.change",function(e){var t=e.detail,r=t.attribute,n=t.newValue;if(!i.PRIVATE.attributes.includes(r))return i.PRIVATE.booleanAttributes.includes(r)&&"true"!==n&&""!==n?i.UTIL.setBooleanAttributeValue(r,n):void 0;i.PRIVATE[r]!==n&&(i.PRIVATE[r]=n)}),i}return _inherits(n,t),_createClass(n,[{key:"attributeChangedCallback",value:function(e,t,r){this.emit("attribute.change",{attribute:e,oldValue:t,newValue:r})}},{key:"connectedCallback",value:function(){var e=this;this.emit("connected"),setTimeout(function(){e.emit("rendered")},0)}},{key:"disconnectedCallback",value:function(){this.PRIVATE.listeners.forEach(function(e){return e.remove()}),this.emit("disconnected")}},{key:"emit",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=this.UTIL.createEvent(e,t);if(r)return r.dispatchEvent(n);this.dispatchEvent(n)}},{key:"on",value:function(e,t){this.addEventListener(e,t)}}]),n}()};