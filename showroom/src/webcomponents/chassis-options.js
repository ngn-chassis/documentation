customElements.define("chassis-options",function(){let a=new WeakMap;return class extends HTMLElement{constructor(){super(),this.keySource="key"in KeyboardEvent.prototype?"key":"keyIdentifier"in KeyboardEvent.prototype?"keyIdentifier":"keyCode",this.attachShadow({mode:"open"});let b=document.createElement("div");b.insertAdjacentHTML("afterbegin",`<template><style>@charset UTF-8; @charset "UTF-8";:host{display:block;width:100%}:host *,:host :after,:host :before{box-sizing:border-box}chassis-options{display:block;width:100%}:host :after,:host :before,chassis-options *{box-sizing:border-box}</style><slot name="afterbegin"></slot><slot name="beforeoptions"></slot><slot></slot><slot name="afteroptions"></slot><slot name="beforeend"></slot></template>`);let c=b.querySelector("template");"content"in c?this.shadowRoot.appendChild(c.content.cloneNode(!0)):c.childNodes.forEach(a=>{this.shadowRoot.appendChild(a.cloneNode(!0))}),c=null,this.crypto=null;try{this.crypto=crypto}catch(a){this.crypto=msCrypto}a.set(this,{addPrivateProps:b=>{for(let c in b)a.get(this)[c]=b[c]},addReadOnlyProp:b=>{Object.defineProperty(this,b,a.get(this).readonlyProperty(b))},addReadOnlyProps:b=>{b.forEach(b=>a.get(this).addReadOnlyProp(b))},generateGuid:(a=null)=>{let b="10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^this.crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16));return a?`${a}_${b}`:b},getBooleanPropertyValue:a=>this.hasAttribute(a)&&"false"!==this.getAttribute(a),handleAttributeChange:(b,c)=>{a.get(this).sourceEl&&(this.setAttribute(b,c),a.get(this).sourceEl[b]=c)},handleBooleanAttributeChange:(b,c)=>{if(a.get(this).sourceEl){return["true","false","",null].includes(c)?"false"===c&&this.hasAttribute(b)?(this.removeAttribute(b),void(a.get(this).sourceEl[b]=!1)):void(a.get(this).sourceEl[b]=this.hasAttribute(b)):(console.error(`<${this.localName}> "${b}" attribute expected boolean but received "${c}"`),this.removeAttribute(b),void(a.get(this).sourceEl[b]=!1))}},handleBooleanPropertyChange:(b,c)=>c?void((!this.hasAttribute(b)||"true"!==this.getAttribute(b))&&(this.setAttribute(b,""),a.get(this).sourceEl[b]=!0)):(this.removeAttribute(b),void(a.get(this).sourceEl[b]=!1)),handlePropertyChange:(b,c)=>{a.get(this).sourceEl[b]=c,this.hasAttribute(b)&&this.getAttribute(b)===c||this.setAttribute(b,c)},readonlyProperty:b=>({get:()=>a.get(this).sourceEl[b],set:()=>a.get(this).throw("readonly",{name:b})}),throw:(a,b)=>{let c="ERROR <chassis-options> ";"readonly"===a?c+=`Cannot set read-only property "${b.name}".`:c=c.trim();console.error(c)}}),this.parent=null,this.selectedOption=null,this.selectedOptionEl=null,a.get(this).options=[]}get form(){return this.parent.form}set form(b){return a.get(this).throw("readonly",{name:"form"})}get displayOptions(){return this.options.map(a=>a.displayElement)}set displayOptions(b){return a.get(this).throw("readonly",{name:"displayOptions"})}get options(){return a.get(this).options}set options(b){return a.get(this).throw("readonly",{name:"options"})}get selectedIndex(){return this.options.indexOf(this.selectedOption)}set selectedIndex(a){this.selectByIndex(a)}get selectedOptions(){let a=[];return this.selectedOption&&a.push(this.selectedOption.displayElement),a}set selectedOptions(b){return a.get(this).throw("readonly",{name:"selectedOptions"})}connectedCallback(){}add(b,c,d=this){if(!customElements.get("chassis-option"))return void console.error(`<chassis-select> requires <chassis-option>. Please include it in this document's <head> element.`);if(!b.hasOwnProperty("sourceElement")||!(b.sourceElement instanceof HTMLElement)){let a=document.createElement("option");b.hasOwnProperty("innerHTML")&&(a.innerHTML=b.innerHTML),b.hasOwnProperty("label")&&(a.innerHTML=b.label),b.hasOwnProperty("value")&&(a.value=b.value),b.hasOwnProperty("disabled")&&(a.disabled="boolean"==typeof b.disabled&&b.disabled),b.sourceElement=a}let e=b.sourceElement.disabled,f=b.sourceElement.getAttribute("id"),g=b.sourceElement.getAttribute("label")||b.sourceElement.textContent.trim(),h=b.sourceElement.hasAttribute("selected"),i=b.sourceElement.getAttribute("value"),j=document.createElement("chassis-option");return f&&(j.id=f),j.label=g,b.sourceElement.hasAttribute("label")&&j.setAttribute("label",b.sourceElement.getAttribute("label")),j.value=i,i&&j.setAttribute("value",i),j.disabled=e,e&&j.setAttribute("disabled",""),j.defaultSelected=h,j.key=a.get(this).generateGuid(),j.addEventListener("click",()=>this.selectByKey(j.key)),j.innerHTML=b.sourceElement.innerHTML,j.parent=d,b={attributes:{disabled:e,id:f,label:g,selected:h,value:i},key:j.key,displayElement:j,sourceElement:b.sourceElement},c?(d.insertBefore(j,d.children.item(c)),this.parent[`${c}`]=b.displayElement,this.options.splice(c,0,b),this.parent.sourceEl.add(b.sourceElement,c),void(h&&this.selectByIndex(c))):void(d.appendChild(j),this.parent[`${this.options.length}`]=b.displayElement,this.options.push(b),!this.parent.sourceElement[this.options.length-1]&&this.parent.sourceElement.appendChild(b.sourceElement),h&&this.selectByKey(b.key))}addChildren(a){for(let b of a){let a=b instanceof HTMLElement;switch(b.nodeName){case"OPTION":this.add(a?this.generateOptionObject(b):b);break;case"OPTGROUP":this.addOptgroup(a?this.generateOptgroup(b):b);break;default:console.warn(`${b.nodeName.toLowerCase()} is not a valid child element for <chassis-select>. Removing...`);}}}addOptgroup(a){let b=document.createElement("chassis-optgroup-label");b.innerHTML=a.getAttribute("label"),this.appendChild(b),this.appendChild(a)}clear(){for(;this.lastChild;)this.removeChild(this.lastChild)}deselectAll(){this.selectedOption=null,this.parent.sourceElement.selectedIndex=-1,this.selectedOptionEl.contents=this.parent.placeholder,this.selectedOptionEl.setAttribute("placeholder","")}generateOptgroup(b){if(!customElements.get("chassis-optgroup"))return void console.error(`<chassis-select> requires <chassis-optgroup>. Please include it in this document's <head> element.`);let c=document.createElement("chassis-optgroup");c.id=a.get(this).generateGuid("optgroup");let d=b.getAttribute("label");if(!d||""===d.trim())return void console.error("<optgroup> must have a label attribute!");c.setAttribute("label",d);let e=b.querySelectorAll("option");for(let a of e)this.add(this.generateOptionObject(a),null,c);return c}generateOptionObject(b){if(!customElements.get("chassis-option"))return void console.error(`<chassis-select> requires <chassis-option>. Please include it in this document's <head> element.`);let c={id:a.get(this).generateGuid(),attributes:{},sourceElement:b};for(let a of b.attributes)c.attributes[a.name]=a.value;return c}getOptionByKey(a){let b;for(let c=0;c<this.options.length;c++)if(this.options[c].key===a){b=this.options[c];break}return b}item(a){return this.options[a].displayElement}namedItem(a){let b=this.options.filter(b=>{let c=b.sourceElement.attributes.getNamedItem("id");return c&&c.value===a});return b.length?b[b.length-1].displayElement:null}/**
     * @method removeOptionByIndex
     * @param  {Number}  [index=null]
     * Index of option to remove
     * @param  {Boolean} [destroy=true]
     */removeOptionByIndex(a=null,b=!0){if(null!==a){let c=this.options[a];c.sourceElement.remove(),b&&c.displayElement.remove(),this.options.splice(a,1)}}/**
     * [select description]
     * TODO: see if its possible to set Event.isTrusted to true for the change event dispatched in this method
     */select(a){a===this.selectedOption||(a.sourceElement.selected=!0,this.selectedOptionEl.contents=a.displayElement.innerHTML,this.selectedOption=a,this.options.forEach(a=>a.displayElement.removeAttribute("selected")),a.displayElement.setAttribute("selected",""),this.selectedOptionEl.removeAttribute("placeholder"),this.dispatchEvent(new Event("change",{bubbles:!0})))}selectByKey(a){let b=this.getOptionByKey(a);return b?void this.select(b):(console.error(`Invalid option key "${a}"`),this.deselectAll())}selectByIndex(a){let b=this.options[a];return b?void this.select(b):0<=a?console.error(`No option at index ${a}`):this.deselectAll()}}}());